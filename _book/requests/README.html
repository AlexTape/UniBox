<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>Requests | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../user_guide/README.html" />
    
    
    <link rel="prev" href="../communication_concept/README.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book"  data-level="2" data-basepath=".." data-revision="1429709657912">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="communication_concept/README.html">
            
                
                    <a href="../communication_concept/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         Concept
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="2" data-path="requests/README.html">
            
                
                    <a href="../requests/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Requests
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="user_guide/README.html">
            
                
                    <a href="../user_guide/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         User Guide
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="hints_and_bugs/README.html">
            
                
                    <a href="../hints_and_bugs/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         Hints and Bugs
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="home/README.html">
            
                
                    <a href="../home/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         Home
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_4512">
                    
                        <h1 id="requests">Requests</h1>
<pre><code>Root:        http://server:8080/UniBox
</code></pre><p>All requests are defined beyond the static route of your tomcat instance. Basically we differ between <strong>public</strong>, <strong>registered</strong> and <strong>administrative</strong> routes. Public routes can be called by any client. Registered routes require a session and a bound user object which is attached during the authentication process and accessible through a valid cookie generated after confirmed credentials.</p>
<h1 id="asynchron-requests">Asynchron Requests</h1>
<h3 id="plain-comet-listener">Plain Comet Listener</h3>
<pre><code>Type:           GET
URL:            /Communicator
Parameter:      -
Output:         text/html
Realm:          public
</code></pre><p>This request delivers a long polling http response to receive <strong>plain</strong> messages.</p>
<h3 id="javascript-comet-listener">JavaScript Comet Listener</h3>
<pre><code>Type:           GET
URL:            /Communicator/JavaScript
Parameter:      -
Output:         text/html
Realm:          public
</code></pre><p>This request delivers a long polling http response to receive <strong>javascript</strong> messages. <strong>GAME Message will not delivered via this route</strong>.</p>
<h3 id="serial-comet-listener">Serial Comet Listener</h3>
<pre><code>Type:           GET
URL:            /Communicator/Serial
Parameter:      -
Output:         text/html
Realm:          registered
</code></pre><p>This request delivers a long polling http response to receive <strong>serialized object</strong> messages. <strong>CHAT Messages will not delivered via this route</strong>.</p>
<h1 id="synchron-requests">Synchron Requests</h1>
<h2 id="login-mask">Login Mask</h2>
<pre><code>Type:           GET|POST
URL:            /Login
Parameter:      error=[STRING]
ContentType:    text/html
Realm:          public
</code></pre><p>This Route is forward handle to /login.html which is a static page serving the login formular. If anything went really wrong while using the webservice you will be redirected to this screen and a error will be attached as a value for the error parameter.</p>
<h2 id="request-connection-cookie">Request Connection Cookie</h2>
<pre><code>Type:           POST
URL:            /Communicator
                /JavaScript
                /Serial
Parameter:      action=connect
                nick=[STRING]
                password[BASE64_STRING]
Output:         text/html
Realm:          registered
</code></pre><p>This request is able to promote a new user as a SYSTEM Message (e.g. &quot;User XY joined..&quot;). No matter which of these three available urls you call to promote your login, the result will be the same. Basically this method can be used to retrieve a cookie without visiting the login mask.</p>
<p><strong>NOTE:</strong> All registered requests are able to authorize you if the request contains nick and password parameters. But in case of the performance issue it is much better to store the received cookie after the first request you do to get instant access without claiming the authorize routine each time again and again.</p>
<h2 id="sending-messages">Sending Messages</h2>
<h3 id="plain-message">Plain Message</h3>
<pre><code>Type:           POST
URL:            /Communicator
Parameter:      action=push
                message=[STRING]
Output:         text/html
Realm:          registered
</code></pre><p>This route can be used to push plain messages. The concrete message content will be specified within the message parameter value. If anything went wrong you will get a 422 Http-State. Plain Messages are currently forwareded to all registered clients. Recommended usage would be a base64 encoded message string even if each client has to encode the string itself.</p>
<p><strong>NOTE:</strong> Right now neither the Client API nor the Dashboard is using PLAIN Messages. It is currently just a kind of generic message which is basically not needed in the UniBox Lifecycle.</p>
<h3 id="javascript-message">Javascript Message</h3>
<pre><code>Type:           POST
URL:            /Communicator/JavaScript
Parameter:      action=push
                message=[STRING]
Output:         text/html
Realm:          registered
</code></pre><p>This route is used to push a new javascript message. The concrete message content will be specified within the message parameter value. If anything went wrong you will get a 422 Http-State. Javascript Messages are forwarded as CHAT Messages. These Messages will be broadcasted to all Dashboard Clients immediatly.</p>
<h3 id="serial-message">Serial Message</h3>
<pre><code>Type:           POST
URL:            /Communicator/Serial
Parameter:      action=push
                message=[STRING]
Output:         text/html
Realm:          registered
</code></pre><p>This route is used to push serial message.  The concrete message content will be specified within the message parameter value. The whole Communication Object will get serialized and transmitted. If anything went wrong you will get a 422 Http-State. Serial Messages can be any <a href="http://alextape.github.io/UniBox/JavaDoc/UniBoxCore/de/unibox/core/network/object/CommunicatorMessageType.html" target="_blank">type of message</a> and will be forwarded to all clients connected through the UniBox API.</p>
<p><strong>NOTE:</strong> Serial Messages will NOT be forwarded to any Dashboard Client.</p>
<h3 id="request-the-dashboard">Request the Dashboard</h3>
<pre><code>Type:           GET|POST
URL:            /Dashboard
Parameter:      -
ContentType:    text/html
Realm:          registered
</code></pre><p>This request is basically a request dispatcher to the full responsive dashboard implementation. The dashboard will work fine with almost any browser on almost any device.</p>
<h3 id="get-user-list">Get user list</h3>
<pre><code>Type:           GET
URL:            /Database
Parameter:      action=getUsers
Output:         application/json
Realm:          registered
</code></pre><p>This request will retrieve the list of registered users as a JSON object.</p>
<h3 id="get-game-list">Get game list</h3>
<pre><code>Type:           GET
URL:            /Database
Parameter:      action=getGames
Output:         application/json
Realm:          registered
</code></pre><p>This request is serving the list of registered games. Including position wiring and Usernames of joined players. The response is a JSON objet.</p>
<h3 id="get-ranking-list">Get ranking list</h3>
<pre><code>Type:           GET
URL:            /Database
Parameter:      action=getRanking
Output:         application/json
Realm:          registered
</code></pre><p>This route is serving the list of registered ranking-points. The response is a JSON object.</p>
<h3 id="get-category-list">Get category list</h3>
<pre><code>Type:           GET
URL:            /Database
Parameter:      action=getCategories
Output:         application/json
Realm:          registered
</code></pre><p>This route is serving the list of registered categories. The response is a JSON object.</p>
<h3 id="create-game">Create game</h3>
<pre><code>Type:           POST
URL:            /Database
Parameter:      action=createGame
                gameName=[STRING]
                catID=[INTEGER]
Output:         text/html
Realm:          registered
</code></pre><p>This route can be used to create a new game entry. The name of this game can be choosen and the game category e.g. catid has to be set to relate the game to a concrete game category.  This call will force all remote clients to refetch the their game list.</p>
<h3 id="create-score">Create score</h3>
<pre><code>Type:           POST
URL:            /Database
Parameter:      action=createResult
                status=[win|draw|lose]
Output:         text/html
Realm:          registered
</code></pre><p>This route can be used to create a new result entry for a finished game. To get it done, you have to set the gameid, the corresponding playerid and the scoring, which yill be set in the database. This call will force all remote clients to refetch the their ranking list.</p>
<h3 id="join-game">Join game</h3>
<pre><code>Type:           GET|POST
URL:            /Game
Parameter:      action=joinGame
                gameid=[INTEGER]
Output:         text/html
Realm:          registered
</code></pre><p>This route can be used to join a existing game by the related game id. If the user is already joined to a game, the backend will automatic leave the previous game to let the user join to this one.</p>
<h3 id="leave-game">Leave game</h3>
<pre><code>Type:           GET|POST
URL:            /Game
Parameter:      action=leaveGame
Output:         text/html
Realm:          registered
</code></pre><p>This route can be used to leave a game in which the user is currently joined.</p>
<h3 id="which-game">Which game</h3>
<pre><code>Type:           GET|POST
URL:            /Game
Parameter:      action=whichGame
Output:         text/html
Realm:          registered
</code></pre><p>This route will return the gameID of the currently joined game, depending on the connected user session.</p>
<h3 id="change-user-password">Change user password</h3>
<pre><code>Type:           POST
URL:            /Auth
Parameter:      action=changePassword
                oldPassword=[STRING]
                inputPassword=[STRING]
                inputPasswordConfirm=[STRING]
Output:         text/html
Realm:          registered
</code></pre><p>This request can be triggered to change the user password.</p>
<h3 id="logout-user">Logout user</h3>
<pre><code>Type:           GET
URL:            /Auth
Parameter:      action=logout
Output:         text/html
Realm:          registered
</code></pre><p>This request can be used by any client to invalidate the corresponing session. The callback will be a redirection to the public login formular.</p>
<h2 id="administrative-requests">Administrative requests</h2>
<h3 id="create-category">Create category</h3>
<pre><code>Type:           POST
URL:            /Admin
Parameter:      action=createCategory
                gameTitle=[STRING]
                numberOfPlayers=[INTEGER]
Output:         text/html
Realm:          administrative
</code></pre><p>This request can be used to create a new game category. The name of this category can be choosen and the maximal count of players able to play together in one game instance has to be set.</p>
<h3 id="create-user">Create user</h3>
<pre><code>Type:           POST
URL:            /Admin
Parameter:      action=createUser
                name=[STRING]
                adminRights[0|1]
Output:         text/html
Realm:          administrative
</code></pre><p>This request can be used to create a new user. To grant admin privilegs to this user the adminrights parameter can be set to true (1) or false (0). The default password will be &#39;user&#39;.</p>
<h3 id="delete-user">Delete user</h3>
<pre><code>Type:           GET
URL:            /Admin
Parameter:      action=deleteUser
                userId=[INTEGER]
Output:         text/html
Realm:          administrative
</code></pre><p>TODO</p>
<h3 id="delete-game">Delete game</h3>
<pre><code>Type:           GET
URL:            /Admin
Parameter:      action=deleteGame
                gameId=[INTEGER]
Output:         text/html
Realm:          administrative
</code></pre><p>TODO</p>
<h3 id="reset-scores">Reset scores</h3>
<pre><code>Type:           GET
URL:            /Admin
Parameter:      action=resetScores
Output:         text/html
Realm:          administrative
</code></pre><p>TODO</p>
<h3 id="reset-database">Reset database</h3>
<pre><code>Type:           GET
URL:            /Admin
Parameter:      action=resetDatabase
Output:         text/html
Realm:          administrative
</code></pre><p>TODO</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../communication_concept/README.html" class="navigation navigation-prev " aria-label="Previous page: Concept"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../user_guide/README.html" class="navigation navigation-next " aria-label="Next page: User Guide"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
